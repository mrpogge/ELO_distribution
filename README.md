# Keeping Elo alive: Evaluating and improving measurement properties of learning systems based on Elo ratings

## Code repository

This repository contains the code for the simulation studies, the data analysis and 
the presentation of the results and figures of the present study. The raw data generated from the simulations are uploaded to an OSF repository and can be accessed [here](https://osf.io/yg8p6/?view_only=e02339f832db455b8d2a92b5fa97935a). The structure of the code is as follows. To make the simulations fast we wrote C routines for the simulations, which are wrapped in R functions. Then we wrote separate simulation scripts where we called these R functions, the parameters of these simulations are stored in a separate "master" file. Each simulation script saves an .RData file to an /output folder. The data analysis scripts read these .RData files calculate the statistics and generates the graphs reported in the paper. Below we provide a detailed overview of the project structure.

## Project structure
### main

In the main directory we store the R and C scripts that are used in the simulations and during the data analysis. 

- **elo_for_simulation.c**: This file contains the C functions for the different versions of the Elo rating system. Each function performs a different simulation over a given number of games and replicate each system for a given amount of times. This script need to be compiled before calling them from R. Remember to set the correct OS in the R files, because by default it is set to MAC. 

- **elo_functions.R**: R wrapper files for the C functions. These functions are called from the simulation scripts.

- **outcome_measures.R**: R functions to calculate the outcome measures of the simulations.

- **plotting.R**: R functions to prepare data for ggplotting, and the actual plotting functions.

### /simulations

This folder contains the different simulations and their settings that we used in the study. The simulations follow a one-at-a-time design meaning that we did not run all possible combinations of factors.  

- **fix_params.R**: Fix parameters and the different factors we used during the simulations. Such as number of students, items, number of games per student etc.

Scripts containing the name "fix_items" refers to the modified Elo where the item difficulties are not updated, while "updated_items" refer to the original version of the algorithm. The name "random" refers to uniform random item selection, "adaptive" refers to adaptive item selection. "K" refers to the simulation where we varied the K-values, "mu" refers to different preferred probability of correct solutions in adaptive item selection. The simulations named as "double_elo..." are using the paralell Elo algorithm we present in the paper.

The "baseline" simulations are used to obtain a stable estimate of the mean of the invariant distribution (if there is one). These results are used to plot the change of ratings. 

... EXTRA SIMULATIONS ...

Each simulation results in a .RData file that is saved in the /output folder. These files can be downloaded from the above osf repository. Please keep in mind, that when you want to rerun the analysis or extend on these results you need to create and output folder and save the given files there!

### /results

This folder contains the R scripts where the reported measures are calculated and the figures are generated based on the results of the simulations. 

- **baseline_simulation_results.R**: Using the results of the baseline simulations and thesimulations with fix K and preferred probability of correct response it provides the trace plot and the plot with the variances and the biases (Figure 1, 2, 10 and 11).

- **K_simulation_results.R**: Using the results of the simulations where we varied the K-values it generates Figure 3. 

- **mu_simulation_results.R**: Using the results of the simulations where we varied the preferred probability of correct response it generates Figure 4.

- **K_and_mu_simulation_results.R**: Using the results of the simulations with the parallel Elo algorithm it generates Figure 12.

- **post_hoc_results.R**: Auxiliary results to demonstrate the variance inflation, and presentation of the lagged-Elo alternative.

### /figures

This folder contains the figures generated by the scripts in the /results folder.

### /output

This folder contains the raw simulation results.

### /legacy

This folder contains all simulation codes and scripts that did not end up in the final version of the paper. We do this to be a bit more transparent about the changes we made in the simulation design over time. If you just want to replicate the results as is please ignore this folder. 

## Final remarks

We hope that this repository is helpful for you to understand the simulations and the data analysis we performed in the present study. If you have any questions or suggestions please do not hesitate to contact us. (CONTACT DETAILS REDUCTED DURING THE PEER-REVIEW PROCESS.)




